{% extends 'base2.html' %}
{% load static %}

{% block content %}
<title>Profile</title>
<style>
  body {
    background: #f8f9fa;
    font-family: Arial, sans-serif;
  }
  .profile-card {
    max-width: 1000px;
    margin: 30px auto;
    padding: 30px;
    background: #fff;
    border-radius: 15px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }
  .profile-pic {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #b3b6b3ff;
  }
  .edit-btn {
    background-color: var(--accent-color);
    color: white;
    font-weight: bold;
  }
  .edit-btn:hover {
    background-color: color-mix(in srgb, var(--accent-color), transparent 15%);
  }
  .form-control[readonly] {
    background-color: #f1f1f1;
    border: 1px solid #ddd;
  }
</style>
    <section style="background: url('{% static "img/hacker_img.jpg" %}') center center/cover no-repeat; 
                position: relative; 
                padding: 80px 0; 
                text-align: center; 
                color: #fff;" >
  
        <!-- Dark overlay -->
        <div style="position: absolute; 
                    top: 0; left: 0; 
                    width: 100%; height: 100%; 
                    background: rgba(0, 0, 0, 0.6);"></div>
        
        <div style="position: relative; z-index: 2;">
            <h2 style="font-size: 42px; font-weight: 700; margin-bottom: 10px; color: #fff;">Profile</h2>
            <p style="margin: 0; font-size: 16px;">
            <a href="{% url 'home' %}" style="color: #fff; text-decoration: none;">Dashboard</a> 
            
            <span style="margin: 0 5px;">/</span> 
            <a href="{% url 'contact' %}"><span style="color: #d91e1eff; font-weight: 500;">Profile</span></a>
            </p>
        </div>
    </section>

    {% comment %} <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up" style="margin-top: 20px;">
        <h2>Profile</h2>
        <p>Access Your profile information</p>
      </div><!-- End Section Title --> {% endcomment %}

<div class="profile-card" >
  <h3 class="text-center mb-4" style="color:var(--accent-color);">Profile Info</h3>
  
  <!-- Wrap everything inside form -->
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="row align-items-center">

      <!-- Profile Picture Section -->
      <div class="col-md-4 text-center mb-3">
        <img src="{{user.user_image.url}}" alt="Profile Picture" class="profile-pic" />
        <div class="mt-3">
          <input type="file" class="form-control mb-2" name="userimage" />
          <button type="submit" class="btn edit-btn w-100">Update Info</button>
        </div>
      </div>

      <!-- User Information Section -->
      <div class="col-md-8">
        <div class="row mb-3">
          <div class="col-md-6">
            <label>Username</label>
            <input type="text" class="form-control" value="{{ user.user_name }}" name="user_name" />
          </div>
          <div class="col-md-6">
            <label>Email</label>
            <input type="email" class="form-control" value="{{user.user_email}}" name="user_email" readonly/>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label>Age</label>
            <input type="text" class="form-control" value="{{user.age}}" name="age" />
          </div>
          <div class="col-md-6">
            <label>Address</label>
            <input type="text" class="form-control" value="{{user.user_address}}" name="address" />
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label>Phone No.</label>
            <input type="text" class="form-control" value="{{user.user_contact}}" name="user_contact"/>
          </div>
          <div class="col-md-6">
            <label>Password</label>
            <input type="password" class="form-control" value="{{user.user_password}}" name="user_password"/>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    {% if messages %}
      {% for message in messages %}
        {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
          <script>
            swal({ title: 'Success!', text: '{{ message }}', icon: 'success', button: 'OK' })
          </script>
        {% elif message.level == DEFAULT_MESSAGE_LEVELS.WARNING %}
          <script>
            swal({ title: 'Warning!', text: '{{ message }}', icon: 'warning', button: 'OK' })
          </script>
        {% elif message.level == DEFAULT_MESSAGE_LEVELS.INFO %}
          <script>
            swal({ title: 'Info!', text: '{{ message }}', icon: 'info', button: 'OK' })
          </script>
        {% elif message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
          <script>
            swal({ title: 'Error!', text: '{{ message }}', icon: 'error', button: 'OK' })
          </script>
        {% endif %}
      {% endfor %}
    {% endif %}
    
{% endblock %}
