{% extends 'baseadmin.html' %}


{% block content %}
  <style>
    /* Welcome Banner */
    .welcome-banner {
      background: #5ddc7254;
      border: none;
      font-size: 1.1rem;
      font-weight: 500;
    }
    
    /* Stats Cards */
    .stats-card {
      padding: 20px;
      border-radius: 16px;
      border: 2px solid #d9d7d7ff;
      box-shadow: 10px 20px 80px rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease-in-out;
    }
    .stats-card:hover {
      transform: translateY(-3px);
    }
    .stats-label {
      font-size: 0.85rem;
      color: #666;
    }
    .stats-value {
      font-size: 1.8rem;
      font-weight: bold;
    }
    .stats-icon i {
      font-size: 2rem;
    }
    
    /* Different Gradients */
    .stats-active {
      background: linear-gradient(to right, #c4f0d9ff, #f8fffa);
    }
    .stats-pending {
      background: linear-gradient(to right, #c0e3eaff, #f9ffff);
    }
    .stats-rejected {
      background: linear-gradient(to right, #c8efc6ff, #fbfffb);
    }
    .stats-feedback {
      background: linear-gradient(to right, #f4e5c3ff, #fffdf7);
    }
    
    /* Table */
    .table-card {
      border-radius: 12px;
      overflow: hidden;
      padding: 20px;
      border: 2px solid #e3e3e3;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }
    .table-custom-head {
      background: #b4d3b4ff;
    }
    .table td,
    .table th {
      vertical-align: middle;
      padding: 10px;
    }
    
    /* Status Badges */
    .status-badge {
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: capitalize;
    }
    .status-badge.accepted {
      background: #e8fdf2;
      color: #28a745;
    }
    .status-badge.rejected {
      background: #ffe5e5;
      color: #d9534f;
    }
    .status-badge.pending {
      background: #fff4e5;
      color: #f0ad4e;
    }
  </style>

  <!-- Content -->
  <div class="content">
    <div class="container-fluid">
      <!-- Welcome Banner -->
      <div class="alert welcome-banner" role="alert">
        <strong>Welcome,</strong> <span id="adminNameHeading">Admin</span>!
      </div>

      <!-- Stats Cards -->
      <div class="row g-3 mb-4">
        <!-- Active Users -->
        <div class="col-12 col-sm-6 col-xl-3">
          <div class="stats-card stats-active">
            <div class="d-flex align-items-center justify-content-between">
              <div>
                <div class="stats-label">Active Users</div>
                <div class="stats-value">{{ accepted_count }}</div>
              </div>
              <div class="stats-icon text-success">
                <i class="bi bi-people"></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Pending Users -->
        <div class="col-12 col-sm-6 col-xl-3">
          <div class="stats-card stats-pending">
            <div class="d-flex align-items-center justify-content-between">
              <div>
                <div class="stats-label">Pending Users</div>
                <div class="stats-value">{{ pending_count|default:'0' }}</div>
              </div>
              <div class="stats-icon text-warning">
                <i class="bi bi-hourglass-split"></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Rejected Users -->
        <div class="col-12 col-sm-6 col-xl-3">
          <div class="stats-card stats-rejected">
            <div class="d-flex align-items-center justify-content-between">
              <div>
                <div class="stats-label">Rejected Users</div>
                <div class="stats-value">{{ rejected_count }}</div>
              </div>
              <div class="stats-icon text-danger">
                <i class="bi bi-ban"></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Feedback -->
        <div class="col-12 col-sm-6 col-xl-3">
          <div class="stats-card stats-feedback">
            <div class="d-flex align-items-center justify-content-between">
              <div>
                <div class="stats-label">Feedbacks</div>
                <div class="stats-value">{{ feedback_count }}</div>
              </div>
              <div class="stats-icon text-warning">
                <i class="bi bi-chat-dots"></i>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Users Table -->
      <div class="row g-4">
        
          <div class="card1 table-card">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
              <h6 class="mb-0">Recent Users</h6>
              <a href="{% url 'allusers' %}" class="btn btn" >View all</a>
            </div>
            <div class="table-responsive">
              <table class="table align-middle mb-0">
                <thead class="table-custom-head" style="background: #d5e8d5ff;">
                  <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody>
                  {% for i in users %}
                    <tr>
                      <td>{{ forloop.counter }}</td>
                      <td>{{ i.user_name }}</td>
                      <td>{{ i.user_email }}</td>
                      <td>
                        {% if i.status == 'accepted' %}
                          <span class="status-badge accepted">{{ i.status }}</span>
                        {% elif i.status == 'rejected' %}
                          <span class="status-badge rejected">{{ i.status }}</span>
                        {% else %}
                          <span class="status-badge pending">{{ i.status }}</span>
                        {% endif %}
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        
      </div>
    </div>
  </div>
{% endblock %}
